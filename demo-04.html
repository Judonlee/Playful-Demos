<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Hyponic Reader</title> 
<style>
.video {
	position:relative;
}
.video .camera,
.video .overlay {
	position:absolute;
	top:0;
}
</style>
</head>
<body>

<p>See console log for pulse info</p>

<div id="camera" class="video"></div>

<div style="display:none">
	<audio id="audio-countdown" autoplay loop>
		<source src="assets/audio/hyponic/countdown.mp3" type="audio/mpeg">
		<source src="assets/audio/hyponic/countdown.ogg" type="audio/ogg">
	</audio>
	<audio autoplay loop>
		<source src="assets/audio/hyponic/music.mp3" type="audio/mpeg">
		<source src="assets/audio/hyponic/music.ogg" type="audio/ogg">
	</audio>
</div>

<script type="text/javascript" src="assets/js/lib/underscore-min.js"></script>
<script type="text/javascript" src="assets/js/lib/headtrackr.min.js"></script>
<script type="text/javascript" src="assets/js/core/pm.js"></script>
<script type="text/javascript" src="assets/js/detectors/pulse.js"></script>
<script type="text/javascript">
	var myPulse = PM.Pulse({
		target: '#camera'
	});

	var myCountdown = document.querySelector('#audio-countdown');
	PM.listen('pulseupdate', function(data) {
		console.log('pulseupdate | bpm: ' + data.target.bpm + ' | heartrate: ' + data.target.heartrate);
		myCountdown.playbackRate = data.target.bpm / 60;
	});
</script>
</body>
</html>
